<!doctype html>
<html lang="en">

<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Agents</title>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet" />
  <link rel="stylesheet" href="/css/style.css" />
</head>

<body>
  <header class="nav-shell">
    <div class="nav-top">
      <button id="menuToggle" class="menu-btn" aria-expanded="false" aria-controls="navLinks">
        <span class="menu-icon"></span>
        <span class="menu-text">Menu</span>
      </button>

      <a href="index.html" class="brand">
        <img src="/Assets/Logo.png" alt="logo" style="height:40px" />
      </a>

      <div class="navbar-buttons" id="navbarUser">
        <a class="button-primary" href="signUp.html" style="text-decoration:none;color:#fff">Sign Up</a>
        <a class="button-primary" href="login.html" style="text-decoration:none;color:#fff">Login</a>
      </div>
    </div>

    <div id="navLinks" class="nav-links">
      <nav id="navbar" class="navbar-selector">
        <a href="index.html">Home</a>
        <a href="buy.html">Buy</a>
        <a href="rent.html">Rent</a>
        <a href="sold.html">Sold</a>
        <a href="findAgent.html">Find Agent</a>
        <a href="news.html">News</a>
      </nav>
    </div>
  </header>

  <section class="agent-results-wrap">
    <div class="results-header">
      <div class="results-path" id="resultsPath">Real Estate Agents</div>
      <div class="filters-row">
        <button class="chip active">Agent</button>
        <button class="chip">Agency</button>
        <div class="chip dropdown-chip">Suburb sales &amp; performance ▾</div>
        <div class="chip dropdown-chip">12 months ▾</div>
        <div class="chip dropdown-chip">All property types ▾</div>
      </div>
    </div>
    <div id="agentList" class="agent-list"></div>
  </section>

  <div class="site-footer-spacer"></div>

  <script>
    // show user if logged in
    (function () {
      const navbarUser = document.getElementById("navbarUser");
      try {
        const user = JSON.parse(localStorage.getItem("user") || "null");
        if (!user) return;

        const displayName = user.first_name?.trim() || user.email;
        navbarUser.innerHTML = `
          <span style="margin-right:10px; color:#047857; font-weight:600;">
            Welcome, ${displayName}
          </span>
          <button class="button-secondary" id="logoutBtn">Logout</button>
        `;

        document.getElementById("logoutBtn").addEventListener("click", () => {
          localStorage.removeItem("user");
          window.location.reload();
        });
      } catch (_) { }
    })();

    const AGENTS = [
      {
        id: 1,
        name: "Adrian William",
        role: "Director",
        agency: "Adrian William",
        suburb: "Newtown, NSW 2042",
        stats: { sold_suburb: 20, median_price: "$1.07M", median_days: 23, sold_all: 38 },
        reviews: { score: 5.0, count: 1093, last12: 324 },
        tags: ["Professional (791)", "Great communicator (703)", "Genuine (622)"],
        photos: ["/Assets/recentSold.webp", "/Assets/berita3.png", "/Assets/berita4.png", "/Assets/berita1.png"],
        headshot: "/Assets/berita4.png",
        agencyVideo: "/Assets/berita2.png"
      },
      {
        id: 2,
        name: "Manuel Roussakis",
        role: "Director",
        agency: "Ray White - Canterbury",
        suburb: "Canterbury, NSW 2193",
        stats: { sold_suburb: 20, median_price: "$803k", median_days: 27, sold_all: 37 },
        reviews: { score: 5.0, count: 34, last12: 13 },
        tags: ["Responsive", "Honest", "Local expert"],
        photos: ["/Assets/berita1.png", "/Assets/berita2.png", "/Assets/berita3.png", "/Assets/berita4.png"],
        headshot: "/Assets/berita1.png",
        agencyVideo: "/Assets/news1.png"
      },
      {
        id: 3,
        name: "Denny Barros",
        role: "Licensed Real Estate Agent",
        agency: "Adrian William",
        suburb: "Canterbury, NSW 2193",
        stats: { sold_suburb: 17, median_price: "$1.07M", median_days: 23, sold_all: 38 },
        reviews: { score: 5.0, count: 48, last12: 17 },
        tags: ["Knowledgeable", "Great communicator"],
        photos: ["/Assets/berita3.png", "/Assets/berita2.png", "/Assets/berita4.png", "/Assets/berita1.png"],
        headshot: "/Assets/berita2.png",
        agencyVideo: "/Assets/news2.png"
      }
    ];

    const qs = s => document.querySelector(s);
    const listEl = qs('#agentList');
    const pathEl = qs('#resultsPath');

    function getQ() {
      const u = new URL(location.href);
      return u.searchParams.get('q') || '';
    }

    function renderAgents(list, label) {
      pathEl.textContent = label;
      listEl.innerHTML = list.map(a => `
        <article class="agent-card">
          <div class="agency-banner ${a.agency.toLowerCase().includes('ray white') ? 'agency-raywhite' : ''}">
            ${a.agency.toLowerCase().includes('ray white') ? 'RayWhite.' : a.agency}
          </div>

          <div class="agent-card-body">
            <div class="agent-left">
              <img class="agent-avatar" src="${a.headshot}" alt="${a.name}">
              <div class="agent-ident">
                <h3 class="agent-name">${a.name}</h3>
                <div class="agent-role">${a.role}</div>
                <div class="agent-agency">at ${a.agency}</div>
                <div class="agent-reviews">⭐ ${a.reviews.score} (${a.reviews.count} reviews)</div>
                <div class="agent-reviews-sub">${a.reviews.last12} reviews in last 12 months</div>
              </div>
            </div>

            <div class="agent-middle">
              <div class="stat">
                <div class="stat-label">${a.suburb.split(',')[0]}</div>
                <div class="stat-value">${a.stats.sold_suburb}</div>
                <div class="stat-sub">Properties sold (as lead agent)</div>
              </div>
              <div class="stat">
                <div class="stat-label">Median sold price</div>
                <div class="stat-value">${a.stats.median_price}</div>
                <div class="stat-sub">Median sold price</div>
              </div>
              <div class="stat">
                <div class="stat-label">Median days advertised</div>
                <div class="stat-value">${a.stats.median_days}</div>
                <div class="stat-sub">Median days advertised</div>
              </div>
              <div class="stat">
                <div class="stat-label">All suburbs</div>
                <div class="stat-value">${a.stats.sold_all}</div>
                <div class="stat-sub">Properties sold</div>
              </div>

              <div class="agent-quote">
                <span>★ 5/5 • Rating from a seller</span>
                <span class="muted">• Verified review</span>
                <p>“Great communication, very professional. The process was smooth from start to finish.”</p>
              </div>

              <div class="thumbs-row">
                <img src="${a.agencyVideo}" alt="agency video">
                ${a.photos.map(p => `<img src="${p}" alt="recently sold">`).join('')}
              </div>
            </div>

            <div class="agent-right">
              <a class="btn-ghost-full" href="/enquire.html?agentId=${a.id}&agent=${encodeURIComponent(a.name)}&agency=${encodeURIComponent(a.agency)}&suburb=${encodeURIComponent(a.suburb)}">Enquire</a>
              <button class="btn-primary-full">Request a free appraisal</button>
              <div class="agent-tags">
                ${a.tags.map(t => `<span class="tag">${t}</span>`).join('')}
              </div>
            </div>
          </div>
        </article>
      `).join('');
    }

    // Init
    const q = getQ();
    const filtered = AGENTS.filter(a =>
      a.suburb.toLowerCase().includes(q.toLowerCase()) ||
      a.name.toLowerCase().includes(q.toLowerCase()) ||
      a.agency.toLowerCase().includes(q.toLowerCase())
    );
    renderAgents(filtered.length ? filtered : AGENTS, filtered.length ? `Real Estate Agents in ${q}` : 'Real Estate Agents');
  </script>

  <script>
    (function () {
      const path = location.pathname.replace(/\/+$/, '');
      document.querySelectorAll('#navbar .navbar-selector a[href]').forEach(a => {
        const href = a.getAttribute('href') || '';
        if (path.endsWith(href) || (path === '/' && href === 'index.html')) a.classList.add('nav-active');
      });
    })();

    (function () {
      const shell = document.querySelector('.nav-shell');
      const btn = document.getElementById('menuToggle');
      if (btn && shell) {
        btn.addEventListener('click', () => {
          const isOpen = shell.classList.toggle('open');
          btn.setAttribute('aria-expanded', String(isOpen));
        });
      }

      // Active tab highlighting (same logic you had)
      const path = location.pathname.replace(/\/+$/, '');
      document.querySelectorAll('#navbar a[href]').forEach(a => {
        const href = a.getAttribute('href') || '';
        const isHome = (path === '' || path === '/') && (href === 'index.html' || href === '/index.html');
        if (isHome || path.endsWith(href) || (href.startsWith('/') && path === href)) {
          a.classList.add('nav-active');
        }
      });
    })();

(async function () {
        try {
          const res = await fetch("index.html");
          const html = await res.text();
          const doc = new DOMParser().parseFromString(html, "text/html");
          const navShell = doc.querySelector(".nav-shell");
          // Find the nav bar's inline script in index.html
          const navScriptText = Array.from(doc.querySelectorAll('script:not([src])'))
                                     .find(s => s.innerText.includes('// -------- Auth area'))
                                     ?.innerText;
          
          document.querySelector(".nav-shell").replaceWith(navShell);
          if (navScriptText) {
            eval(navScriptText); // Re-run the auth/nav script
          }
        } catch(e) {
          console.error("Could not load navigation bar.", e);
        }
      })();
  </script>
</body>

<footer class="site-footer">
  <div class="footer-inner">
    <div class="footer-cols">
      <div class="footer-col footer-brand">
        <div class="brand">
          <img src="/Assets/Logo.png" alt="MyHome logo" class="footer-logo" />
        </div>
      </div>

      <div class="footer-col">
        <h4 class="footer-title">Product</h4>
        <a href="#">How it works</a>
        <a href="#">Who we help</a>
        <a href="#">Features</a>
        <a href="#">Pricing</a>
      </div>

      <div class="footer-col">
        <h4 class="footer-title">Resources</h4>
        <a href="#">Get Help</a>
        <a href="#">Partnership</a>
        <a href="#">Blog</a>
        <a href="#">Legal</a>
      </div>

      <div class="footer-col">
        <h4 class="footer-title">About</h4>
        <a href="#">About</a>
        <a href="#">Sponsorship</a>
        <a href="#">Hardship</a>
        <a href="#">Contact</a>
      </div>

      <div class="footer-col footer-connect">
        <h4 class="footer-title">Connect with us</h4>
        <div class="footer-socials">
          <!-- Simple inline SVGs so you don't depend on external assets -->
          <a href="#" aria-label="Facebook" class="icon">
            <svg viewBox="0 0 24 24" width="18" height="18" aria-hidden="true">
              <image href="../Assets/facebook.png" xlink:href="../Assets/facebook-app-symbol.png" width="18"
                height="18" />
            </svg>
          </a>

          <a href="#" aria-label="Facebook" class="icon">
            <svg viewBox="0 0 24 24" width="18" height="18" aria-hidden="true">
              <image href="../Assets/youtube.png" xlink:href="../Assets/facebook-app-symbol.png" width="18"
                height="18" />
            </svg>
          </a>
          <a href="#" aria-label="Facebook" class="icon">
            <svg viewBox="0 0 24 24" width="18" height="18" aria-hidden="true">
              <image href="../Assets/twitter.png" xlink:href="../Assets/facebook-app-symbol.png" width="18"
                height="18" />
            </svg>
          </a>
        </div>
      </div>
    </div>

    <hr class="footer-divider" />

    <div class="footer-bottom">
      <div>Copyright 2025 · MyHome</div>
      <div class="footer-legal">
        <a href="#">Terms of Service</a>
        <a href="#">Privacy Policy</a>
      </div>
    </div>
  </div>
</footer>

</html>