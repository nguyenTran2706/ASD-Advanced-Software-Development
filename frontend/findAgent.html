<!doctype html>
<html lang="en">

<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Find Agent</title>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet" />
  <link rel="stylesheet" href="/css/style.css" />
</head>

<body>
  <header class="nav-shell">
    <div class="nav-top">
      <button id="menuToggle" class="menu-btn" aria-expanded="false" aria-controls="navLinks">
        <span class="menu-icon"></span>
        <span class="menu-text">Menu</span>
      </button>

      <a href="index.html" class="brand">
        <img src="/Assets/Logo.png" alt="logo" style="height:40px" />
      </a>

      <div class="navbar-buttons" id="navbarUser">
        <a class="button-primary" href="signUp.html" style="text-decoration:none;color:#fff">Sign Up</a>
        <a class="button-primary" href="login.html" style="text-decoration:none;color:#fff">Login</a>
      </div>
    </div>

    <div id="navLinks" class="nav-links">
      <nav id="navbar" class="navbar-selector">
        <a href="index.html">Home</a>
        <a href="buy.html">Buy</a>
        <a href="rent.html">Rent</a>
        <a href="sold.html">Sold</a>
        <a href="findAgent.html">Find Agent</a>
        <a href="news.html">News</a>
      </nav>
    </div>
  </header>

  <section class="agent-hero">
    <div class="agent-hero-inner">
      <div class="agent-hero-left">
        <h1 class="agent-title">Search and compare real<br />estate agents</h1>
        <p class="agent-subtitle">
          Whether you're starting your search or already have someone in mind,
          you can compare sales agents, property managers or agencies before making your decision.
        </p>

        <div class="agent-search">
          <div class="search-input-wrap">
            <svg class="search-icon" viewBox="0 0 24 24" aria-hidden="true">
              <path d="M10 18a8 8 0 1 1 5.293-14.003A8 8 0 0 1 10 18Zm11 3-6.001-6" fill="none" stroke="currentColor"
                stroke-width="2" stroke-linecap="round" />
            </svg>
            <input id="agentSearch" class="agent-search-input" placeholder="Search by region, suburb or postcode"
              autocomplete="off" />
          </div>
          <ul id="agentSuggest" class="agent-suggest"></ul>
          <button id="agentSearchBtn" class="agent-search-btn">Search</button>
        </div>
      </div>

      <div class="agent-hero-right">
        <img src="/Assets/housekey.avif" class="agent-hero-img" alt="People discussing with agent" />
      </div>
    </div>
  </section>

  <section class="agent-steps">
    <h2 class="steps-title">Selling your place?</h2>
    <p class="steps-subtitle">Compare real estate agents before you‚Äôre sold on one.</p>

    <div class="steps-grid">
      <div class="step-card">
        <div class="step-badge">1</div>
        <h3>Search for an agent</h3>
        <p>Enter your suburb to find agents specialised in your area.</p>
      </div>

      <div class="step-card">
        <div class="step-badge">2</div>
        <h3>Compare their stats</h3>
        <p>Compare agent stats and their reviews to see who might be right for you.</p>
      </div>

      <div class="step-card">
        <div class="step-badge">3</div>
        <h3>Connect with the best</h3>
        <p>Get a free market appraisal from agents before making your decision.</p>
      </div>
    </div>
  </section>

  <section class="agent-results-wrap">
    <div class="results-header">
      <div class="results-path" id="resultsPath">Real Estate Agents</div>
      <div class="filters-row">
        <button class="chip active">Agent</button>
        <button class="chip">Agency</button>
        <div class="chip dropdown-chip" id="sortChip">Suburb sales &amp; performance ‚ñæ</div>
        <div class="chip dropdown-chip">12 months ‚ñæ</div>
        <div class="chip dropdown-chip">All property types ‚ñæ</div>
      </div>
    </div>

    <div id="agentList" class="agent-list"></div>
  </section>

  <div style="height:60px"></div>

  <script>
    // Navbar user state (login/logout)
    (function () {
      const navbarUser = document.getElementById("navbarUser");
      try {
        const user = JSON.parse(localStorage.getItem("user") || "null");
        if (!user) return;

        const displayName = user.first_name?.trim() || user.email;
        navbarUser.innerHTML = `
          <span style="margin-right:10px; color:#047857; font-weight:600;">
            Welcome, ${displayName}
          </span>
          <button class="button-secondary" id="logoutBtn">Logout</button>
        `;

        document.getElementById("logoutBtn").addEventListener("click", () => {
          localStorage.removeItem("user");
          window.location.reload();
        });
      } catch (_) { }
    })();

    const SUBURBS = [
      { name: "Canterbury, NSW", postcode: "2193" },
      { name: "Ashbury, NSW", postcode: "2193" },
      { name: "Hurlstone Park, NSW", postcode: "2193" },
      { name: "Newtown, NSW", postcode: "2042" },
      { name: "Marrickville, NSW", postcode: "2204" },
      { name: "Zetland, NSW", postcode: "2017" },
    ];

    const AGENTS = [
      {
        id: 1,
        name: "Adrian William",
        role: "Director",
        agency: "Adrian William",
        suburb: "Newtown, NSW 2042",
        stats: { sold_suburb: 20, median_price: "$1.07M", median_days: 23, sold_all: 38 },
        reviews: { score: 5.0, count: 1093, last12: 324 },
        tags: ["Professional (791)", "Great communicator (703)", "Genuine (622)"],
        photos: ["/Assets/berita2.png", "/Assets/berita3.png", "/Assets/berita4.png", "/Assets/berita1.png"],
        headshot: "/Assets/berita4.png",
        agencyVideo: "/Assets/berita2.png"
      },
      {
        id: 2,
        name: "Manuel Roussakis",
        role: "Director",
        agency: "Ray White - Canterbury",
        suburb: "Canterbury, NSW 2193",
        stats: { sold_suburb: 20, median_price: "$803k", median_days: 27, sold_all: 37 },
        reviews: { score: 5.0, count: 34, last12: 13 },
        tags: ["Responsive", "Honest", "Local expert"],
        photos: ["/Assets/berita1.png", "/Assets/berita2.png", "/Assets/berita3.png", "/Assets/berita4.png"],
        headshot: "/Assets/berita1.png",
        agencyVideo: "/Assets/news1.png"
      },
      {
        id: 3,
        name: "Denny Barros",
        role: "Licensed Real Estate Agent",
        agency: "Adrian William",
        suburb: "Canterbury, NSW 2193",
        stats: { sold_suburb: 17, median_price: "$1.07M", median_days: 23, sold_all: 38 },
        reviews: { score: 5.0, count: 48, last12: 17 },
        tags: ["Knowledgeable", "Great communicator"],
        photos: ["/Assets/berita3.png", "/Assets/berita2.png", "/Assets/berita4.png", "/Assets/berita1.png"],
        headshot: "/Assets/berita2.png",
        agencyVideo: "/Assets/news2.png"
      }
    ];

    const qs = sel => document.querySelector(sel);
    const agentListEl = qs("#agentList");
    const input = qs("#agentSearch");
    const suggest = qs("#agentSuggest");
    const searchBtn = qs("#agentSearchBtn");
    const pathEl = qs("#resultsPath");

    function renderAgents(list, label = "Real Estate Agents") {
      pathEl.textContent = label;
      agentListEl.innerHTML = list.map(a => `
        <article class="agent-card">
          <div class="agency-banner ${a.agency.toLowerCase().includes('ray white') ? 'agency-raywhite' : ''}">
            ${a.agency.toLowerCase().includes('ray white') ? 'RayWhite.' : a.agency}
          </div>

          <div class="agent-card-body">
            <div class="agent-left">
              <img class="agent-avatar" src="${a.headshot}" alt="${a.name}">
              <div class="agent-ident">
                <h3 class="agent-name">${a.name}</h3>
                <div class="agent-role">${a.role}</div>
                <div class="agent-agency">at ${a.agency}</div>
                <div class="agent-reviews">‚≠ê ${a.reviews.score} (${a.reviews.count} reviews)</div>
                <div class="agent-reviews-sub">${a.reviews.last12} reviews in last 12 months</div>
              </div>
            </div>

            <div class="agent-middle">
              <div class="stat">
                <div class="stat-label">Canterbury</div>
                <div class="stat-value">${a.stats.sold_suburb}</div>
                <div class="stat-sub">Properties sold (as lead agent)</div>
              </div>
              <div class="stat">
                <div class="stat-label">Median sold price</div>
                <div class="stat-value">${a.stats.median_price}</div>
                <div class="stat-sub">Median sold price</div>
              </div>
              <div class="stat">
                <div class="stat-label">Median days advertised</div>
                <div class="stat-value">${a.stats.median_days}</div>
                <div class="stat-sub">Median days advertised</div>
              </div>
              <div class="stat">
                <div class="stat-label">All suburbs</div>
                <div class="stat-value">${a.stats.sold_all}</div>
                <div class="stat-sub">Properties sold</div>
              </div>

              <div class="agent-quote">
                <span>‚òÖ 5/5 ‚Ä¢ Rating from a seller</span>
                <span class="muted">‚Ä¢ Verified review</span>
                <p>‚ÄúGreat communication, very professional. The process was smooth from start to finish.‚Äù</p>
              </div>

              <div class="thumbs-row">
                <img src="${a.agencyVideo}" alt="agency video">
                ${a.photos.map(p => `<img src="${p}" alt="recently sold">`).join('')}
              </div>
            </div>

            <div class="agent-right">
              <button class="btn-ghost-full">Enquire</button>
              <button class="btn-primary-full">Request a free appraisal</button>
              <div class="agent-tags">
                ${a.tags.map(t => `<span class="tag">${t}</span>`).join('')}
              </div>
            </div>
          </div>
        </article>
      `).join("");
    }

    function showSuggestions(val) {
      const v = val.trim().toLowerCase();
      if (!v) { suggest.innerHTML = ""; suggest.classList.remove("open"); return; }
      const hits = SUBURBS.filter(s => s.name.toLowerCase().includes(v) || s.postcode.includes(v)).slice(0, 5);
      suggest.innerHTML = hits.map(h => `
        <li class="suggest-item" data-name="${h.name} ${h.postcode}">
          <span class="suggest-icon">üìç</span>
          <span>${h.name} <strong>${h.postcode}</strong></span>
        </li>`).join("");
      suggest.classList.toggle("open", hits.length > 0);
    }

    input.addEventListener("input", e => showSuggestions(e.target.value));
    suggest.addEventListener("click", (e) => {
      const li = e.target.closest(".suggest-item");
      if (!li) return;
      input.value = li.dataset.name;
      suggest.classList.remove("open");
      doSearch();
    });
    document.addEventListener('click', (e) => { if (!e.target.closest('.agent-search')) suggest.classList.remove('open'); });

    function doSearch() {
      const q = input.value.trim();
      if (!q) return;
      window.location.href = `/agentResults.html?q=${encodeURIComponent(q)}`;
    }
    searchBtn.addEventListener("click", doSearch);
    input.addEventListener("keydown", (e) => { if (e.key === 'Enter') { e.preventDefault(); doSearch(); } });

    (function () {
      const path = location.pathname.replace(/\/+$/, '');
      const links = document.querySelectorAll('#navbar .navbar-selector a[href]');
      links.forEach(a => {
        const href = a.getAttribute('href') || '';
        const isHome = (path === '' || path === '/') && (href === 'index.html' || href === '/index.html');
        const matches =
          isHome ||
          path.endsWith(href) ||
          (href.startsWith('/') && path === href);

        if (matches) a.classList.add('nav-active');
      });
    })();

    (function () {
      const shell = document.querySelector('.nav-shell');
      const btn = document.getElementById('menuToggle');
      if (btn && shell) {
        btn.addEventListener('click', () => {
          const isOpen = shell.classList.toggle('open');
          btn.setAttribute('aria-expanded', String(isOpen));
        });
      }

      // Active tab highlighting (same logic you had)
      const path = location.pathname.replace(/\/+$/, '');
      document.querySelectorAll('#navbar a[href]').forEach(a => {
        const href = a.getAttribute('href') || '';
        const isHome = (path === '' || path === '/') && (href === 'index.html' || href === '/index.html');
        if (isHome || path.endsWith(href) || (href.startsWith('/') && path === href)) {
          a.classList.add('nav-active');
        }
      });
    })();
    // initial
    renderAgents(AGENTS);
  </script>
</body>

<footer class="site-footer">
  <div class="footer-inner">
    <div class="footer-cols">
      <div class="footer-col footer-brand">
        <div class="brand">
          <img src="/Assets/Logo.png" alt="MyHome logo" class="footer-logo" />
        </div>
      </div>

      <div class="footer-col">
        <h4 class="footer-title">Product</h4>
        <a href="#">How it works</a>
        <a href="#">Who we help</a>
        <a href="#">Features</a>
        <a href="#">Pricing</a>
      </div>

      <div class="footer-col">
        <h4 class="footer-title">Resources</h4>
        <a href="#">Get Help</a>
        <a href="#">Partnership</a>
        <a href="#">Blog</a>
        <a href="#">Legal</a>
      </div>

      <div class="footer-col">
        <h4 class="footer-title">About</h4>
        <a href="#">About</a>
        <a href="#">Sponsorship</a>
        <a href="#">Hardship</a>
        <a href="#">Contact</a>
      </div>

      <div class="footer-col footer-connect">
        <h4 class="footer-title">Connect with us</h4>
        <div class="footer-socials">
          <!-- Simple inline SVGs so you don't depend on external assets -->
          <a href="#" aria-label="Facebook" class="icon">
            <svg viewBox="0 0 24 24" width="22" height="22" fill="currentColor">
              <path d="M13.5 9H16V6h-2.5C11.57 6 11 7.57 11 9v2H9v3h2v7h3v-7h2.1l.4-3H14v-1c0-.55.45-1 1-1Z" />
            </svg>
          </a>
          <a href="#" aria-label="YouTube" class="icon">
            <svg viewBox="0 0 24 24" width="22" height="22" fill="currentColor">
              <path
                d="M21.6 7.2a3 3 0 0 0-2.1-2.1C17.9 4.7 12 4.7 12 4.7s-5.9 0-7.5.4A3 3 0 0 0 2.4 7.2 31 31 0 0 0 2 12a31 31 0 0 0 .4 4.8 3 3 0 0 0 2.1 2.1c1.6.4 7.5.4 7.5.4s5.9 0 7.5-.4a3 3 0 0 0 2.1-2.1A31 31 0 0 0 22 12a31 31 0 0 0-.4-4.8ZM10 15.5v-7l6 3.5-6 3.5Z" />
            </svg>
          </a>
          <a href="#" aria-label="Twitter" class="icon">
            <svg viewBox="0 0 24 24" width="22" height="22" fill="currentColor">
              <path
                d="M21 7.5c-.6.3-1.2.5-1.9.6.7-.4 1.2-1 1.5-1.8-.6.4-1.4.7-2.1.9a3.3 3.3 0 0 0-5.7 3c-2.7-.1-5.1-1.4-6.7-3.4a3.3 3.3 0 0 0 1 4.4c-.5 0-1-.1-1.4-.4v.1a3.3 3.3 0 0 0 2.6 3.2c-.4.1-.8.1-1.3 0 .4 1.2 1.6 2.1 3 2.1A6.6 6.6 0 0 1 3 18.6 9.3 9.3 0 0 0 8 20c5.7 0 8.9-4.8 8.9-8.9v-.4c.6-.4 1.2-1 1.6-1.7Z" />
            </svg>
          </a>
        </div>
      </div>
    </div>

    <hr class="footer-divider" />

    <div class="footer-bottom">
      <div>Copyright 2025 ¬∑ MyHome</div>
      <div class="footer-legal">
        <a href="#">Terms of Service</a>
        <a href="#">Privacy Policy</a>
      </div>
    </div>
  </div>
</footer>

</html>